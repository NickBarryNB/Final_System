---

# ğŸ§  åŸºäºRK3568è¾¹ç¼˜è®¡ç®—çš„æ™ºæ…§ç¯å¢ƒç›‘æµ‹ç³»ç»Ÿ  
## ğŸ“‹ é¡¹ç›®éœ€æ±‚ä¹¦  

---

## ä¸€ã€é¡¹ç›®æ¦‚è¿°  
- **é¡¹ç›®åç§°**ï¼šåŸºäºRK3568è¾¹ç¼˜è®¡ç®—çš„æ™ºæ…§ç¯å¢ƒç›‘æµ‹ç³»ç»Ÿ  
- **å¼€å‘å‘¨æœŸ**ï¼š2025-12-02 è‡³ 2025-12-16ï¼ˆå…±2å‘¨ï¼‰  
- **å°ç»„æˆå‘˜**ï¼šç‹æ–‡å¯Œã€æ¨é¹æˆã€ç†Šé²²  
- **é¡¹ç›®ç›®æ ‡**ï¼š  
  1. å®ç°è¿œç¨‹ç›‘æ§ä¸æ§åˆ¶ç¯å¢ƒè®¾å¤‡ï¼ˆLEDã€é£æ‰‡ã€èˆµæœºã€æ¸©æ¹¿åº¦ã€çº¢å¤–ã€èœ‚é¸£å™¨ç­‰ï¼‰  
  2. æ”¯æŒWebç«¯ä¸QTç«¯å®æ—¶è§†é¢‘æµæŸ¥çœ‹  
  3. æ„å»ºè¾¹ç¼˜è®¡ç®—èŠ‚ç‚¹ï¼Œå®ç°è§†é¢‘æµä¼ è¾“ã€è®¾å¤‡æ§åˆ¶ã€æ•°æ®é‡‡é›†ç­‰åŠŸèƒ½  
  4. ç»ˆç«¯è®¾å¤‡é€šè¿‡Zigbee/WiFi/MQTTä¸è¾¹ç¼˜èŠ‚ç‚¹é€šä¿¡  

---

## äºŒã€æ ¸å¿ƒåŠŸèƒ½æ¨¡å—  

### âœ… ç”¨æˆ·ç«¯ï¼ˆWeb + QTï¼‰  
- **å®æ—¶è§†é¢‘æµæ˜¾ç¤º**ï¼ˆæ”¯æŒmjpg-streamer/gstreamerï¼‰  
- **ç¯å¢ƒæ•°æ®æ˜¾ç¤º**ï¼ˆæ¸©æ¹¿åº¦ã€çº¢å¤–æ„Ÿåº”ç­‰ï¼‰  
- **è®¾å¤‡è¿œç¨‹æ§åˆ¶**ï¼ˆLEDã€é£æ‰‡ã€èˆµæœºã€æ¸©æ¹¿åº¦ã€çº¢å¤–ã€èœ‚é¸£å™¨ç­‰6è·¯ä»¥ä¸Šï¼‰  
- **ç™»å½•åŠŸèƒ½**ï¼ˆQTç«¯ï¼‰  
- **ç•Œé¢ä¸€è‡´æ€§**ï¼šWebä¸QTç•Œé¢å°½é‡ç»Ÿä¸€  

### âœ… è¾¹ç¼˜èŠ‚ç‚¹ç«¯ï¼ˆRK3568ï¼‰  
- **ç³»ç»Ÿç§»æ¤**ï¼šBuildroot + BoaæœåŠ¡å™¨ + CGIæ§åˆ¶é€»è¾‘  
- **è§†é¢‘æµæœåŠ¡**ï¼šmjpg-streamer/gstreamer  
- **æ‘„åƒå¤´é©±åŠ¨**ä¸è§†é¢‘é‡‡é›†ï¼ˆæ‹ç…§ã€å½•åƒåŠŸèƒ½è„šæœ¬å¾…å®ç°ï¼‰  
- **ç½‘ç»œé€šä¿¡**ï¼šæ”¯æŒZigbee/WiFi/MQTTä¸ç»ˆç«¯é€šä¿¡  
- **æ—¥å¿—å¼‚æ­¥è®°å½•**  
- **ç³»ç»ŸçŠ¶æ€ç›‘æ§**ï¼ˆè¿›ç¨‹ã€çŠ¶æ€ä¿¡æ¯å±•ç¤ºï¼‰  

### âœ… ç»ˆç«¯è®¾å¤‡ï¼ˆSTM32å•ç‰‡æœºï¼‰  
- **ä¼ æ„Ÿå™¨æ•°æ®é‡‡é›†**ï¼šLEDã€é£æ‰‡ã€èˆµæœºã€æ¸©æ¹¿åº¦ã€çº¢å¤–ã€èœ‚é¸£å™¨ç­‰  
- **æ‰§è¡Œå™¨æ§åˆ¶**ï¼šLEDã€é£æ‰‡ã€èˆµæœºã€æ¸©æ¹¿åº¦ã€çº¢å¤–ã€èœ‚é¸£å™¨
- **é€šä¿¡æ¨¡å—**ï¼šZigbee/WiFi/MQTT  
- **æ•°æ®æ ¼å¼**ï¼šJSON  
- **åç»­è¿­ä»£**ï¼šæ”¯æŒFreeRTOSå¤šä»»åŠ¡è°ƒåº¦  

---

## ä¸‰ã€æŠ€æœ¯è·¯çº¿ä¸æ¶æ„  

### ğŸ›  æŠ€æœ¯æ ˆ  
| æ¨¡å—      | æŠ€æœ¯æ–¹æ¡ˆ                                                 |
| --------- | -------------------------------------------------------- |
| è¾¹ç¼˜èŠ‚ç‚¹  | RK3568 + Buildroot + Boa + CGI + mjpg-streamer/gstreamer |
| é€šä¿¡åè®®  | Zigbee / WiFi / MQTT                                     |
| æ•°æ®æ ¼å¼  | JSON                                                     |
| è§†é¢‘æµ    | mjpg-streamer / gstreamer                                |
| WebæœåŠ¡å™¨ | Boa + CGIæ§åˆ¶é€»è¾‘                                        |
| ä¸Šä½æœº    | QTï¼ˆç§»æ¤è‡³RK3568ï¼‰                                       |
| æ•°æ®åº“    | SQLiteï¼ˆæš‚æœªå®ç°ï¼‰                                       |
| æ—¥å¿—ç³»ç»Ÿ  | å¼‚æ­¥æ—¥å¿—è®°å½•                                             |

### ğŸ“¡ JSONæ•°æ®æ ¼å¼ç¤ºä¾‹  ï¼ˆå…·ä½“çœ‹ç¬¬ä¸ƒç« -JSONé€šä¿¡åè®®å®Œæ•´å®šä¹‰ï¼‰
---

## å››ã€é¡¹ç›®è¿›åº¦è®¡åˆ’  

---

#### ç¬¬1å‘¨ï¼šåŸºç¡€æ¡†æ¶æ­å»º

**Day 1 (12æœˆ3æ—¥) - é¡¹ç›®å¯åŠ¨ä¸ç¯å¢ƒå‡†å¤‡**

| ä»»åŠ¡                 | è´Ÿè´£äºº | é¢„è®¡æ—¶é—´ | äº§å‡ºç‰©         |
| -------------------- | ------ | -------- | -------------- |
| é¡¹ç›®å¯åŠ¨ä¼šï¼Œæ˜ç¡®åˆ†å·¥ | å…¨å‘˜   | 2h       | ä¼šè®®çºªè¦       |
| RK3568å¼€å‘ç¯å¢ƒæ­å»º   | å…¨å‘˜   | 4h       | å¯ç”¨çš„å¼€å‘ç¯å¢ƒ |
| STM32å¼€å‘ç¯å¢ƒæ­å»º    | ç†Šé²²   | 4h       | STM32å·¥ç¨‹æ¨¡æ¿  |
| Webæ¡†æ¶è®¾è®¡          | æ¨é¹æˆ | 4h       | Webé¡¹ç›®æ¡†æ¶    |
| Gitä»“åº“åˆå§‹åŒ–        | ç†Šé²²   | 1h       | é¡¹ç›®ä»“åº“       |
| QTæ¡†æ¶è®¾è®¡           | ç‹æ–‡å¯Œ | 4h       | QTé¡¹ç›®æ¡†æ¶     |
| STM32ä¼ æ„Ÿå™¨å¼€å‘      | å…¨å‘˜   | 4h       | ä¼ æ„Ÿå™¨è®¾å¤‡     |

**Day 2 (12æœˆ4æ—¥) - åŸºç¡€ç³»ç»Ÿç§»æ¤**

| ä»»åŠ¡              | è´Ÿè´£äºº | é¢„è®¡æ—¶é—´ | äº§å‡ºç‰©           |
| ----------------- | ------ | -------- | ---------------- |
| Buildrootç³»ç»Ÿé…ç½® | ç‹æ–‡å¯Œ | 6h       | åŸºç¡€ç³»ç»Ÿé•œåƒ     |
| STM32 GPIOé©±åŠ¨    | ç†Šé²²   | 6h       | LEDæ§åˆ¶é©±åŠ¨      |
| Webé¡µé¢æ¡†æ¶       | æ¨é¹æˆ | 6h       | åŸºç¡€HTML+CSSæ¡†æ¶ |
| ä»£ç è¯„å®¡ä¸åŒæ­¥    | å…¨å‘˜   | 2h       | ä»£ç åˆå¹¶         |

**Day 3 (12æœˆ5æ—¥) - è§†é¢‘æµæœåŠ¡**

| ä»»åŠ¡              | è´Ÿè´£äºº | é¢„è®¡æ—¶é—´ | äº§å‡ºç‰©         |
| ----------------- | ------ | -------- | -------------- |
| mjpg-streamerç§»æ¤ | æ¨é¹æˆ | 4h       | è§†é¢‘æµæœåŠ¡è¿è¡Œ |
| æ‘„åƒå¤´é©±åŠ¨æµ‹è¯•    | ç‹æ–‡å¯Œ | 4h       | æ‘„åƒå¤´æ­£å¸¸å·¥ä½œ |
| STM32ä¸²å£é€šä¿¡     | ç†Šé²²   | 4h       | ä¸²å£æ”¶å‘æµ‹è¯•   |
| Webè§†é¢‘æµæ˜¾ç¤º     | æ¨é¹æˆ | 4h       | ç½‘é¡µæ˜¾ç¤ºè§†é¢‘   |

**Day 4 (12æœˆ6æ—¥) - WebæœåŠ¡å™¨ä¸é€šä¿¡**

| ä»»åŠ¡           | è´Ÿè´£äºº | é¢„è®¡æ—¶é—´ | äº§å‡ºç‰©       |
| -------------- | ------ | -------- | ------------ |
| BoaæœåŠ¡å™¨é…ç½®  | ç‹æ–‡å¯Œ | 4h       | WebæœåŠ¡è¿è¡Œ  |
| CGIåŸºç¡€æ¡†æ¶    | ç‹æ–‡å¯Œ | 4h       | CGIè°ƒç”¨æˆåŠŸ  |
| STM32 JSONè§£æ | ç†Šé²²   | 4h       | JSONåº“é›†æˆ   |
| è®¾å¤‡æ§åˆ¶é¡µé¢   | æ¨é¹æˆ | 4h       | æ§åˆ¶æŒ‰é’®ç•Œé¢ |

#### ç¬¬2å‘¨ï¼šåŠŸèƒ½å®Œå–„ä¸ä¼˜åŒ–

**Day 5 (12æœˆ8æ—¥) - æ ¸å¿ƒåŠŸèƒ½è”è°ƒ**

| ä»»åŠ¡            | è´Ÿè´£äºº | é¢„è®¡æ—¶é—´ | äº§å‡ºç‰©                  |
| --------------- | ------ | -------- | ----------------------- |
| CGIè®¾å¤‡æ§åˆ¶æ¥å£ | ç‹æ–‡å¯Œ | 4h       | /cgi-bin/device_control |
| Webæ§åˆ¶é€»è¾‘     | æ¨é¹æˆ | 4h       | AJAXè°ƒç”¨CGI             |
| STM32æ‰§è¡Œæ§åˆ¶   | ç†Šé²²   | 4h       | æ¥æ”¶å¹¶æ‰§è¡Œå‘½ä»¤          |
| ç¬¬ä¸€æ¬¡é›†æˆæµ‹è¯•  | å…¨å‘˜   | 4h       | "ç‚¹æŒ‰é’®èƒ½äº®ç¯"          |
| ç³»ç»Ÿç¨³å®šæ€§æµ‹è¯•  | ç‹æ–‡å¯Œ | 4h       | å‹åŠ›æµ‹è¯•æŠ¥å‘Š            |
| ç•Œé¢ç¾åŒ–        | æ¨é¹æˆ | 4h       | ä¼˜åŒ–åçš„UI              |
| é€šä¿¡åè®®ä¼˜åŒ–    | ç†Šé²²   | 4h       | æ›´ç¨³å®šçš„åè®®            |
| æ–‡æ¡£æ•´ç†        | å…¨å‘˜   | 2h       | ç¬¬ä¸€å‘¨æ€»ç»“              |

**Day 6 (12æœˆ9æ—¥) - å¤šè®¾å¤‡æ”¯æŒ**

| ä»»åŠ¡            | è´Ÿè´£äºº | é¢„è®¡æ—¶é—´ | äº§å‡ºç‰©       |
| --------------- | ------ | -------- | ------------ |
| å¤šè·¯è®¾å¤‡CGIæ¥å£ | ç‹æ–‡å¯Œ | 4h       | æ‰¹é‡æ§åˆ¶æ¥å£ |
| é£æ‰‡/èœ‚é¸£å™¨é©±åŠ¨ | ç†Šé²²   | 4h       | å¤šè®¾å¤‡æ§åˆ¶   |
| è®¾å¤‡ç®¡ç†é¡µé¢    | æ¨é¹æˆ | 4h       | è®¾å¤‡åˆ—è¡¨é¡µé¢ |
| æ•°æ®å­˜å‚¨æœºåˆ¶    | ç‹æ–‡å¯Œ | 4h       | æ–‡ä»¶å­˜å‚¨æ–¹æ¡ˆ |

**Day 7 (12æœˆ10æ—¥) - ä¼ æ„Ÿå™¨é›†æˆ**

| ä»»åŠ¡            | è´Ÿè´£äºº | é¢„è®¡æ—¶é—´ | äº§å‡ºç‰©               |
| --------------- | ------ | -------- | -------------------- |
| DHT11æ¸©æ¹¿åº¦é©±åŠ¨ | ç†Šé²²   | 4h       | ä¼ æ„Ÿå™¨æ•°æ®è¯»å–       |
| ä¼ æ„Ÿå™¨æ•°æ®æ¥å£  | ç‹æ–‡å¯Œ | 4h       | /cgi-bin/sensor_data |
| æ•°æ®å±•ç¤ºé¡µé¢    | æ¨é¹æˆ | 4h       | å®æ—¶æ•°æ®å›¾è¡¨         |
| Zigbeeé€šä¿¡æµ‹è¯•  | ç†Šé²²   | 4h       | æ— çº¿é€šä¿¡æ­£å¸¸         |

**Day 8 (12æœˆ11æ—¥) - QTç§»æ¤**

| ä»»åŠ¡           | è´Ÿè´£äºº | é¢„è®¡æ—¶é—´ | äº§å‡ºç‰©         |
| -------------- | ------ | -------- | -------------- |
| QTäº¤å‰ç¼–è¯‘ç¯å¢ƒ | ç‹æ–‡å¯Œ | 4h       | QTè¿è¡Œåœ¨RK3568 |
| QTç•Œé¢å¼€å‘     | æ¨é¹æˆ | 4h       | QTæ§åˆ¶ç•Œé¢     |
| QTè§†é¢‘æµæ˜¾ç¤º   | æ¨é¹æˆ | 4h       | QTæ˜¾ç¤ºmjpgæµ   |
| STM32ä¼˜åŒ–      | ç†Šé²²   | 4h       | æ€§èƒ½ä¼˜åŒ–       |

**Day 9 (12æœˆ12æ—¥) - åª’ä½“åŠŸèƒ½**

| ä»»åŠ¡         | è´Ÿè´£äºº | é¢„è®¡æ—¶é—´ | äº§å‡ºç‰©           |
| ------------ | ------ | -------- | ---------------- |
| æ‹ç…§åŠŸèƒ½å®ç° | ç‹æ–‡å¯Œ | 4h       | /cgi-bin/capture |
| å½•åƒè„šæœ¬ç¼–å†™ | æ¨é¹æˆ | 4h       | å½•åˆ¶è§†é¢‘åŠŸèƒ½     |
| åª’ä½“ç®¡ç†é¡µé¢ | æ¨é¹æˆ | 4h       | ç…§ç‰‡/è§†é¢‘åˆ—è¡¨    |
| å­˜å‚¨ç©ºé—´ç®¡ç† | ç‹æ–‡å¯Œ | 4h       | æ–‡ä»¶æ¸…ç†æœºåˆ¶     |

**Day 10 (12æœˆ13æ—¥) - ç³»ç»Ÿç›‘æ§**

| ä»»åŠ¡         | è´Ÿè´£äºº | é¢„è®¡æ—¶é—´ | äº§å‡ºç‰©                 |
| ------------ | ------ | -------- | ---------------------- |
| ç³»ç»ŸçŠ¶æ€ç›‘æ§ | ç‹æ–‡å¯Œ | 4h       | /cgi-bin/system_status |
| æ—¥å¿—ç³»ç»Ÿå®ç° | ç‹æ–‡å¯Œ | 4h       | å¼‚æ­¥æ—¥å¿—è®°å½•           |
| çŠ¶æ€æ˜¾ç¤ºé¡µé¢ | æ¨é¹æˆ | 4h       | ç³»ç»Ÿç›‘æ§é¢æ¿           |
| å¼‚å¸¸å¤„ç†æœºåˆ¶ | ç†Šé²²   | 4h       | é”™è¯¯æ¢å¤åŠŸèƒ½           |

**Day 11 (12æœˆ15æ—¥) - é›†æˆæµ‹è¯•**

| ä»»åŠ¡         | è´Ÿè´£äºº | é¢„è®¡æ—¶é—´ | äº§å‡ºç‰©     |
| ------------ | ------ | -------- | ---------- |
| å…¨åŠŸèƒ½æµ‹è¯•   | å…¨å‘˜   | 6h       | æµ‹è¯•æŠ¥å‘Š   |
| æ€§èƒ½ä¼˜åŒ–     | ç‹æ–‡å¯Œ | 4h       | ä¼˜åŒ–å»ºè®®   |
| ç”¨æˆ·ä½“éªŒä¼˜åŒ– | æ¨é¹æˆ | 4h       | ç•Œé¢ä¼˜åŒ–   |
| å‹åŠ›æµ‹è¯•     | ç†Šé²²   | 4h       | ç¨³å®šæ€§æŠ¥å‘Š |

**Day 12 (12æœˆ16æ—¥) - æ–‡æ¡£ä¸æ¼”ç¤º**

| ä»»åŠ¡         | è´Ÿè´£äºº | é¢„è®¡æ—¶é—´ | äº§å‡ºç‰©   |
| ------------ | ------ | -------- | -------- |
| ç”¨æˆ·æ‰‹å†Œç¼–å†™ | æ¨é¹æˆ | 4h       | ä½¿ç”¨æ–‡æ¡£ |
| æŠ€æœ¯æ–‡æ¡£æ•´ç† | ç‹æ–‡å¯Œ | 4h       | è®¾è®¡æ–‡æ¡£ |
| æ¼”ç¤ºè§†é¢‘å½•åˆ¶ | ç†Šé²²   | 4h       | åŠŸèƒ½æ¼”ç¤º |
| ä»£ç æ³¨é‡Šå®Œå–„ | å…¨å‘˜   | 4h       | è§„èŒƒä»£ç  |

**Day 13 (12æœˆ17æ—¥) - é¡¹ç›®æ”¶å°¾**

| ä»»åŠ¡         | è´Ÿè´£äºº | é¢„è®¡æ—¶é—´ | äº§å‡ºç‰©   |
| ------------ | ------ | -------- | -------- |
| æœ€ç»ˆé›†æˆæµ‹è¯• | å…¨å‘˜   | 4h       | å‘å¸ƒç‰ˆæœ¬ |
| é¡¹ç›®æ€»ç»“æŠ¥å‘Š | ç‹æ–‡å¯Œ | 2h       | é¡¹ç›®æ€»ç»“ |
| ä»£ç ä»“åº“æ•´ç† | æ¨é¹æˆ | 2h       | æ¸…ç†åˆ†æ”¯ |
| æ¼”ç¤ºå‡†å¤‡     | ç†Šé²²   | 2h       | æ¼”ç¤ºææ–™ |

## äº”ã€é£é™©ä¸å¯¹ç­–  

| é£é™©                     | å¯¹ç­–                                                         |
| ------------------------ | ------------------------------------------------------------ |
| æ—¶é—´ç´§å¼                  | ä¼˜å…ˆå®ç°æ ¸å¿ƒåŠŸèƒ½ï¼šâ€œç½‘é¡µèƒ½çœ‹è§†é¢‘ + ç‚¹æŒ‰é’®èƒ½äº®ç¯ + RK3568æ–‡ä»¶ç³»ç»Ÿç§»æ¤â€ |
| RK3568ç§»æ¤SQLiteæš‚æœªå®ç° | æš‚æ—¶ä¸ä½¿ç”¨æ•°æ®åº“ï¼Œæ•°æ®æš‚å­˜ä¸ºæ–‡ä»¶æˆ–å†…å­˜ç»“æ„                   |
| æ–°æŠ€æœ¯å­¦ä¹ æˆæœ¬é«˜         | åˆ†é…ä¸“äººè´Ÿè´£è°ƒç ”ä¸å®éªŒï¼Œç»„å†…å…±äº«å­¦ä¹ ç¬”è®°                     |
| ç¡¬ä»¶å…¼å®¹æ€§é—®é¢˜           | æå‰é‡‡è´­æµ‹è¯•ï¼Œé¢„ç•™è°ƒè¯•æ—¶é—´                                   |

---

## å…­ã€äº¤ä»˜ç‰©æ¸…å•  
- âœ… å¯è¿è¡Œçš„RK3568ç³»ç»Ÿé•œåƒï¼ˆBuildroot + Boa + mjpg-streamerï¼‰  
- âœ… Webç«¯ä¸QTç«¯æ§åˆ¶ç•Œé¢ï¼ˆæ”¯æŒè§†é¢‘æµä¸è®¾å¤‡æ§åˆ¶ï¼‰  
- âœ… STM32ç»ˆç«¯å›ºä»¶ï¼ˆæ”¯æŒä¼ æ„Ÿå™¨é‡‡é›†ä¸æ§åˆ¶æ‰§è¡Œï¼‰  
- âœ… é€šä¿¡åè®®æ–‡æ¡£ä¸JSONæ ¼å¼å®šä¹‰  
- âœ… é¡¹ç›®æºç ã€è„šæœ¬ã€é…ç½®æ–‡ä»¶  
- âœ… é¡¹ç›®æ¼”ç¤ºè§†é¢‘ä¸ä½¿ç”¨æ–‡æ¡£  

-------------------------



## ä¸ƒã€JSONé€šä¿¡åè®®å®Œæ•´å®šä¹‰

### 1.1 é€šä¿¡æ¶æ„
```
STM32ç»ˆç«¯è®¾å¤‡ <--Zigbee/WiFi/MQTT--> RK3568è¾¹ç¼˜èŠ‚ç‚¹ <--HTTP/MQTT--> Web/QTå®¢æˆ·ç«¯
```

### 1.2 åè®®åŸºç¡€æ ¼å¼
```json
// æš‚å®šé‡‡ç”¨çš„æ ¼å¼

// æ¯3ç§’å‘é€ä¸€æ¬¡
{
  "version": "1.0",
  "msg_id": "msg_001",
  "timestamp": "2025-12-02T10:00:00Z",  // å‹ç¼©å­—æ®µå
  "source": "node_01",
  "destination": "rk3568",
  "type": "state",  // eventäº‹ä»¶ç”¨æˆ·ä¸‹å‘/stateçŠ¶æ€æ­£å¸¸ä¸Šå‘
  "battery": 3.7,// ç”µæ± V
  // æ•°æ®
  "data": {
    "sensors": [
    { "sensor_id": "temp_001", "type": "temperature", "value": 26.5 },// æ¸©åº¦
    { "sensor_id": "humidity_001", "type": "humidity", "value": 65.2 },// æ¹¿åº¦
    { "sensor_id": "ir_001", "type": "infrared", "value": 0 }// çº¢å¤–
    // å†åŠ 
  ],
  // è®¾å¤‡çŠ¶æ€
  "actuators": [
    { "device_id": "led_001", "status": "on" },// ledç¯
    { "device_id": "fan_001", "status": "off", "speed": 0 }// ç”µæœºé£æ‰‡
    // å†åŠ 
  ]
  }
}

```

### 1.3 ç³»ç»ŸçŠ¶æ€åè®®

#### 1.3.1 å¿ƒè·³åŒ…
```json
{
  "version": "1.0",
  "msg_id": "heartbeat_001",
  "timestamp": "2025-12-02T10:00:00.000Z",
  "source": "sensor_001",
  "destination": "rk3568",
  "type": "heartbeat",
  "data": {
    "device_id": "sensor_001",
    "status": "online",
    "interval": 30000,
    "next_report": 30000
  }
}
```

#### 1.5.2 é”™è¯¯æŠ¥å‘Š
```json
{
  "version": "1.0",
  "msg_id": "error_001",
  "timestamp": "2025-12-02T10:00:00.000Z",
  "source": "sensor_001",
  "destination": "rk3568",
  "type": "error_report",
  "error": {
    "code": 1001,
    "level": "warning",
    "message": "Temperature sensor reading timeout",
    "device": "dht11_sensor",
    "suggestion": "Check sensor connection"
  }
}
```

### 1.6 æ”¯æŒçš„è®¾å¤‡ç±»å‹å®šä¹‰

| è®¾å¤‡ç±»å‹     | typeå­—æ®µå€¼ | å¯æ‰§è¡Œæ“ä½œ                             |
| ------------ | ---------- | -------------------------------------- |
| LEDç¯        | led        | on, off, toggle, blink, set_brightness |
| é£æ‰‡         | fan        | start, stop, set_speed                 |
| èœ‚é¸£å™¨       | buzzer     | beep, stop, set_frequency              |
| èˆµæœº         | servo      | set_angle, sweep                       |
| æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ | dht11      | read                                   |
| çº¢å¤–ä¼ æ„Ÿå™¨   | infrared   | read, set_sensitivity                  |
| æ‘„åƒå¤´       | camera     | capture, start_record, stop_record     |

---

## å…«ã€CGIæ¥å£è®¾è®¡æ–‡æ¡£

### 2.1 CGIæ¥å£åŸºç¡€ä¿¡æ¯
- **æœåŠ¡å™¨**: Boa Web Server
- **æ¥å£è·¯å¾„**: `/cgi-bin/`
- **è¯·æ±‚æ–¹å¼**: GET/POST
- **æ•°æ®æ ¼å¼**: JSON

### 2.2 æ¥å£åˆ—è¡¨

#### 2.2.1 è§†é¢‘æµæ§åˆ¶æ¥å£
```bash
# è·å–è§†é¢‘æµçŠ¶æ€
GET /cgi-bin/stream_status.cgi

# å“åº”
{
  "status": "success",
  "stream": {
    "enabled": true,
    "resolution": "640x480",
    "fps": 30,
    "format": "mjpeg",
    "port": 8080,
    "url": "http://192.168.1.100:8080/?action=stream"
  }
}

# æ§åˆ¶è§†é¢‘æµ
POST /cgi-bin/stream_control.cgi

# è¯·æ±‚
{
  "action": "start|stop|restart",
  "resolution": "640x480",
  "fps": 30
}
```

#### 2.2.2 è®¾å¤‡æ§åˆ¶æ¥å£
```bash
# è·å–è®¾å¤‡åˆ—è¡¨
GET /cgi-bin/devices.cgi

# å“åº”
{
  "status": "success",
  "devices": [
    {
      "id": "led_001",
      "name": "å®¢å…ä¸»ç¯",
      "type": "led",
      "status": "on",
      "last_update": "2025-12-02T10:00:00Z"
    },
    {
      "id": "fan_001",
      "name": "å§å®¤é£æ‰‡",
      "type": "fan",
      "status": "off",
      "speed": 0,
      "last_update": "2025-12-02T09:59:00Z"
    }
  ]
}

# æ§åˆ¶å•ä¸ªè®¾å¤‡
POST /cgi-bin/device_control.cgi

# è¯·æ±‚
{
  "device_id": "led_001",
  "action": "on|off|toggle",
  "params": {
    "brightness": 80
  }
}

# æ‰¹é‡æ§åˆ¶è®¾å¤‡
POST /cgi-bin/batch_control.cgi

# è¯·æ±‚
{
  "commands": [
    {
      "device_id": "led_001",
      "action": "on",
      "delay": 0
    },
    {
      "device_id": "fan_001",
      "action": "start",
      "params": {
        "speed": 3
      },
      "delay": 1000
    }
  ]
}
```

#### 2.2.3 ä¼ æ„Ÿå™¨æ•°æ®æ¥å£
```bash
# è·å–ä¼ æ„Ÿå™¨å®æ—¶æ•°æ®
GET /cgi-bin/sensor_data.cgi?device_id=sensor_001&type=temperature

# å“åº”
{
  "status": "success",
  "data": {
    "device_id": "sensor_001",
    "type": "temperature",
    "value": 26.5,
    "unit": "Â°C",
    "timestamp": "2025-12-02T10:00:00Z",
    "history": [
      {
        "time": "2025-12-02T09:55:00Z",
        "value": 26.3
      },
      {
        "time": "2025-12-02T10:00:00Z",
        "value": 26.5
      }
    ]
  }
}

# è·å–æ‰€æœ‰ä¼ æ„Ÿå™¨æ•°æ®
GET /cgi-bin/all_sensors.cgi

# å“åº”
{
  "status": "success",
  "sensors": [
    {
      "device_id": "temp_001",
      "type": "temperature",
      "value": 26.5,
      "unit": "Â°C",
      "status": "normal"
    },
    {
      "device_id": "humidity_001",
      "type": "humidity",
      "value": 65.2,
      "unit": "%RH",
      "status": "normal"
    }
  ],
  "timestamp": "2025-12-02T10:00:00Z"
}
```

#### 2.2.4 ç³»ç»ŸçŠ¶æ€æ¥å£
```bash
# è·å–ç³»ç»ŸçŠ¶æ€
GET /cgi-bin/system_status.cgi

# å“åº”
{
  "status": "success",
  "system": {
    "hostname": "rk3568-edge",
    "uptime": "2 days, 3 hours",
    "load": [0.5, 0.4, 0.3],
    "memory": {
      "total": 2048000,
      "used": 1024000,
      "free": 1024000,
      "usage": 50
    },
    "storage": {
      "total": 16000000,
      "used": 8000000,
      "free": 8000000,
      "usage": 50
    },
    "temperature": 45.5,
    "network": {
      "eth0": {
        "ip": "192.168.1.100",
        "rx": 1024000,
        "tx": 512000
      },
      "wlan0": {
        "ip": "192.168.1.101",
        "rx": 512000,
        "tx": 256000
      }
    }
  }
}
```

#### 2.2.5 åª’ä½“æ§åˆ¶æ¥å£
```bash
# æ‹ç…§
POST /cgi-bin/capture.cgi

# è¯·æ±‚
{
  "resolution": "1920x1080",
  "quality": 85,
  "save_path": "/media/photos/"
}

# å“åº”
{
  "status": "success",
  "filename": "photo_20251202100000.jpg",
  "path": "/media/photos/photo_20251202100000.jpg",
  "size": 1024000,
  "timestamp": "2025-12-02T10:00:00Z"
}

# å½•åƒæ§åˆ¶
POST /cgi-bin/record.cgi

# è¯·æ±‚
{
  "action": "start|stop",
  "duration": 60,
  "resolution": "1280x720",
  "fps": 30
}
```

#### 2.2.6 æ—¥å¿—æŸ¥è¯¢æ¥å£
```bash
# è·å–æ—¥å¿—
GET /cgi-bin/logs.cgi?type=system&limit=50&level=info

# å“åº”
{
  "status": "success",
  "logs": [
    {
      "timestamp": "2025-12-02T10:00:00Z",
      "level": "info",
      "module": "streamer",
      "message": "Video stream started on port 8080"
    },
    {
      "timestamp": "2025-12-02T09:59:00Z",
      "level": "warning",
      "module": "sensor",
      "message": "Sensor data timeout"
    }
  ],
  "total": 150,
  "page": 1,
  "limit": 50
}
```

### 2.3 CGIè„šæœ¬å®ç°ç¤ºä¾‹ï¼ˆCè¯­è¨€ï¼‰
```c
// device_control.cgi ç¤ºä¾‹
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include "cgi_lib.h"

int main() {
    char *content_length_str = getenv("CONTENT_LENGTH");
    int content_length = 0;
    
    if (content_length_str) {
        content_length = atoi(content_length_str);
    }
    
    // è¯»å–POSTæ•°æ®
    char *post_data = malloc(content_length + 1);
    fread(post_data, 1, content_length, stdin);
    post_data[content_length] = '\0';
    
    // è§£æJSONï¼ˆç®€åŒ–ç¤ºä¾‹ï¼‰
    // å®é™…é¡¹ç›®ä¸­åº”ä½¿ç”¨cJSONåº“
    
    // æ‰§è¡Œæ§åˆ¶é€»è¾‘
    // system("echo 'control command' > /dev/ttyUSB0");
    
    // è¿”å›JSONå“åº”
    printf("Content-type: application/json\r\n\r\n");
    printf("{\"status\":\"success\",\"message\":\"Command executed\"}");
    
    free(post_data);
    return 0;
}
```

---

## ä¹…ã€æ¯æ—¥ä»»åŠ¡åˆ†è§£è¡¨ï¼ˆå«Gitåä½œæµç¨‹ï¼‰

### 3.1 é¡¹ç›®Gitåä½œæµç¨‹

#### 3.1.1 åˆ†æ”¯ç­–ç•¥
```
main (ä¿æŠ¤åˆ†æ”¯ï¼Œä»…åˆå¹¶)
â”‚   â”œâ”€â”€ feature/wang (ç‹æ–‡å¯Œ)
â”‚   â”œâ”€â”€ feature/yang (æ¨é¹æˆ)
â”‚   â””â”€â”€ feature/xiong (ç†Šé²²)
```

### 3.2 æ¯æ—¥ç«™ä¼šï¼ˆ15åˆ†é’Ÿï¼‰
- **æ—¶é—´**: æ¯å¤©ä¸Šåˆ10ï¼š30
- **å†…å®¹**:
  1. æ˜¨å¤©å®Œæˆçš„å·¥ä½œ
  2. ä»Šå¤©è®¡åˆ’çš„å·¥ä½œ
  3. é‡åˆ°çš„å›°éš¾å’Œéœ€è¦å¸®åŠ©çš„åœ°æ–¹
- **è®°å½•**: ç”±ç†Šé²²è®°å½•ä¼šè®®è¦ç‚¹æ±‡æ€»æˆæ—¥æŠ¥

### 3.3 é‡Œç¨‹ç¢‘æ£€æŸ¥ç‚¹
1. **12æœˆ5æ—¥**: å®Œæˆ"ç½‘é¡µèƒ½çœ‹è§†é¢‘ + ç‚¹æŒ‰é’®èƒ½äº®ç¯"æ ¸å¿ƒåŠŸèƒ½
2. **12æœˆ8æ—¥**: å®Œæˆ6è·¯ä»¥ä¸Šè®¾å¤‡æ§åˆ¶
3. **12æœˆ11æ—¥**: å®ŒæˆQTç§»æ¤å’Œè§†é¢‘æµæ˜¾ç¤º
4. **12æœˆ15æ—¥**: å®Œæˆå…¨éƒ¨åŠŸèƒ½å¹¶ç¨³å®šè¿è¡Œ

